{"version":3,"sources":["webpack:///webpack/bootstrap 9a3b4244083b7f3f941d","webpack:///./src/js/index.js","webpack:///./src/js/defmove.js","webpack:///./src/js/defmove.js?35a2"],"names":[],"mappings":"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","file":"defmove.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/public/js\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9a3b4244083b7f3f941d\n **/","import defmove from './defmove';\n\n$(($) => {\n  window.frequencySlider = $('#frequency').slider({\n    formatter: function(value) {\n      return 'Current value: ' + value;\n    }\n  });\n\n  var showAxes = function() {\n    document.getElementById('spectrum').style.display = \"block\";\n    document.getElementById('spectrum-zoom').style.display = \"block\";\n  };\n\n\n  var drawBall = function(ctx, pos) {\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    ctx.fillStyle = \"rgb(0,0,0)\";\n\n    var normalizedX = Math.floor( 0.5 * ctx.canvas.width );\n    var normalizedY = Math.floor( 0.5 * ctx.canvas.height );\n    var maxSize = 100;\n    var normalizedSize = maxSize/2 + Math.floor( pos/30 * maxSize );\n    ctx.fillRect( normalizedX - normalizedSize/2,\n                  ctx.canvas.height - normalizedY - normalizedSize/2,\n                  normalizedSize, normalizedSize );\n  };\n\n    var clearBall = function(ctx) {\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  };\n\n  var drawFrequencies = function(ctx, analyser, freqs, primaryTone, startFreq, endFreq) {\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    ctx.fillStyle = \"rgb(0,0,0)\";\n\n    var primaryVolume = freqs[primaryTone];\n    // For some reason, primaryVolume becomes 0 on firefox, I have no idea why\n    if (primaryVolume == 0) {\n      primaryVolume = 255;\n    }\n    for (var i = 0; i < (endFreq-startFreq); i++) {\n      var volume = freqs[startFreq+i];\n      var normalizedX = Math.floor( i/(endFreq-startFreq) * ctx.canvas.width );\n      var normalizedY = Math.floor( 0.9 * volume/primaryVolume * ctx.canvas.height );\n      ctx.fillRect( normalizedX, ctx.canvas.height - normalizedY - 5, 5, 5 );\n    }\n  };\n\n  var ballCanvas = document.getElementById('ball');\n  var spectrumCanvas = document.getElementById('spectrum');\n  var zoomedSpectrumCanvas = document.getElementById('spectrum-zoom');\n\n  function drawSpectrum(defmove_data) {\n    if (defmove_data.type !== 'TYPE_1') {\n      return false;\n    }\n    let payload = defmove_data.payload;\n\n    let ctx = spectrumCanvas.getContext('2d');\n    drawFrequencies(ctx, payload.analyser, payload.audioData, payload.primaryTone, 0, payload.index);\n  }\n\n  function drawZoomedSpectrum(defmove_data) {\n    if (defmove_data.type !== 'TYPE_1') {\n      return false;\n    }\n\n    let payload =  defmove_data.payload;\n    let ctx = zoomedSpectrumCanvas.getContext('2d');\n\n    drawFrequencies(ctx, payload.analyser, payload.audioData, payload.primaryTone, payload.from, payload.to);\n  }\n\n  window.boxActive = $('#action-box').prop('checked');\n\n  function boxMove(bandwidth) {\n    if (!window.boxActive) {\n      return false;\n    }\n\n    let threshold = 4;\n\n    if (bandwidth.left > threshold || bandwidth.right > threshold) {\n      let diff = bandwidth.left - bandwidth.right;\n\n      let ctx = ballCanvas.getContext('2d');\n      drawBall(ctx, diff);\n    }\n  }\n\n  var clamp = function(val, min, max) {\n    return Math.min(max, Math.max(min, val));\n  };\n\n  window.scrollActive = $('#action-scroll').prop('checked');\n\n  function scrolling(defmove_data) {\n    if (defmove_data.type !== 'TYPE_2') {\n      return false;\n    }\n\n    let payload =  defmove_data.payload;\n\n    if (window.scrollActive && (payload.band.left > 10 || payload.band.right > 10)) {\n      var bandwidthDifference = clamp(payload.band.right - payload.band.left, -10, 10);\n      var currentScroll = $(window).scrollTop()\n      var scale = 10;\n      $(window).scrollTop(currentScroll + scale*bandwidthDifference);\n    }\n  }\n\n  $('#action-scroll').on('click', function (e) {\n    var $this = $(this);\n    window.scrollActive = $this.prop('checked');\n  });\n\n  $('#action-box').on('click', function (e) {\n    var $this = $(this);\n    window.boxActive = $this.prop('checked');\n  });\n\n  var DefMove;\n  $('#on').on('click', function(e) {\n    e.preventDefault();\n    var $on = $(this);\n    var $off = $('#off');\n\n    DefMove = new defmove(drawZoomedSpectrum, drawSpectrum, scrolling);\n\n    DefMove.setFrequency(window.frequencySlider.slider('getValue') * 1000);\n\n    try {\n      DefMove.init(boxMove);\n      $on.prop('disabled', true);\n      $off.prop('disabled', false);\n    } catch (e) {\n    }\n\n    showAxes();\n  });\n\n  window.frequencySlider.on('slideStop', function (e) {\n    DefMove.setFrequency(window.frequencySlider.slider('getValue') * 1000);\n  });\n\n  $('#off').on('click', function(e) {\n    e.preventDefault();\n    var $off = $(this);\n    var $on = $('#on');\n\n    $on.prop('disabled', false);\n    $off.prop('disabled', true);\n\n    var ctx = ballCanvas.getContext('2d');\n    clearBall(ctx);\n\n    DefMove.stop();\n  });\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/index.js\n **/","const {\n    requestAnimationFrame,\n    cancelAnimationFrame,\n    setTimeout,\n    navigator\n} = window;\n\nexport default class {\n\n    constructor(...callbacks) {\n        const AudioContext = (\n            window.AudioContext\n            || window.webkitAudioContext\n            || window.mozAudioContext\n            || window.oAudioContext\n            || window.msAudioContext\n        );\n\n        this.audioCtx = new AudioContext();\n        this.oscillator = this.audioCtx.createOscillator();\n        this.analyser = this.audioCtx.createAnalyser();\n\n        this.freq = 20000;\n        this.relevantFreqWindow = 33;\n        this.nyquist = this.audioCtx.sampleRate / 2;\n\n        this.readMicInterval = 0;\n\n        this.callbacks = callbacks;\n    }\n\n    pushToCallbacks(args) {\n        if (this.callbacks.length > 0) {\n            this.callbacks.forEach((callback) => callback(args));\n        }\n    }\n\n    getBandwidth (freqs) {\n        const primaryTone = this.freqToIndex(this.freq),\n              primaryVolume = freqs[primaryTone],\n              maxVolumeRatio = 0.001;\n\n        let leftBandwidth = 0,\n            rightBandwidth = 0,\n            volume,\n            normalizedVolume;\n\n        do {\n            leftBandwidth++;\n            volume = freqs[primaryTone-leftBandwidth];\n            normalizedVolume = volume / primaryVolume;\n        } while (normalizedVolume > maxVolumeRatio && leftBandwidth < this.relevantFreqWindow);\n\n        do {\n            rightBandwidth++;\n            volume = freqs[primaryTone+rightBandwidth];\n            normalizedVolume = volume / primaryVolume;\n        } while (normalizedVolume > maxVolumeRatio && rightBandwidth < this.relevantFreqWindow);\n\n        return {\n            left: leftBandwidth,\n            right: rightBandwidth\n        };\n    }\n\n    freqToIndex (freq) {\n        return Math.round(\n            freq / this.nyquist * this.analyser.fftSize / 2\n        );\n    }\n\n    indexToFreq (index) {\n        return this.nyquist / (this.analyser.fftSize / 2) * index;\n    }\n\n    optimizeFrequency (oscillator, freqSweepStart, freqSweepEnd) {\n        let oldFreq = oscillator.frequency.value,\n            audioData = new Uint8Array(this.analyser.frequencyBinCount),\n            maxAmp = 0,\n            maxAmpIndex = 0,\n            from = this.freqToIndex(freqSweepStart),\n            to   = this.freqToIndex(freqSweepEnd);\n\n        for (var i = from; i < to; i++) {\n            oscillator.frequency.value = this.indexToFreq(i);\n            this.analyser.getByteFrequencyData(audioData);\n\n            if (audioData[i] > maxAmp) {\n                maxAmp = audioData[i];\n                maxAmpIndex = i;\n            }\n        }\n        // Sometimes the above procedure seems to fail, not sure why.\n        // If that happends, just use the old value.\n        if (maxAmpIndex == 0) {\n            return oldFreq;\n        }\n        else {\n            return this.indexToFreq(maxAmpIndex);\n        }\n    }\n\n    readMic (userCallback) {\n        let audioData = new Uint8Array(this.analyser.frequencyBinCount);\n\n        this.analyser.getByteFrequencyData(audioData);\n\n        let primaryTone = this.freqToIndex(this.freq);\n\n        let analyser = this.analyser;\n\n        this.pushToCallbacks({\n            type: 'TYPE_1',\n            payload: {\n                primaryTone: primaryTone,\n                index: this.freqToIndex(22000),\n                to: primaryTone + this.relevantFreqWindow,\n                from: primaryTone - this.relevantFreqWindow,\n                analyser,\n                audioData\n            }\n        });\n\n        var band = this.getBandwidth(audioData);\n        userCallback(band);\n\n        this.pushToCallbacks({\n            type: 'TYPE_2',\n            payload: {\n                band,\n            }\n        });\n\n        this.readMicInterval = requestAnimationFrame(this.readMic.bind(this, userCallback));\n\n        return this.readMicInterval;\n    }\n\n    handleMic (stream, callback, userCallback) {\n\n        let mic = this.audioCtx.createMediaStreamSource(stream);\n        this.stream = stream;\n        this.mic = mic;\n\n        this.analyser.smoothingTimeConstant = 0.5;\n        this.analyser.fftSize = 2048;\n\n        mic.connect(this.analyser);\n\n        // Doppler tone\n        this.oscillator.frequency.value = this.freq;\n        this.oscillator.type = this.oscillator.SINE;\n        this.oscillator.start(0);\n        this.oscillator.connect(this.audioCtx.destination);\n\n        // There seems to be some initial \"warm-up\" period\n        // where all frequencies are significantly louder.\n        // A quick timeout will hopefully decrease that bias effect.\n        setTimeout(() => {\n            // Optimize doppler tone\n            let freq = this.optimizeFrequency(this.oscillator, 19000, 22000);\n\n            this.oscillator.frequency.value = freq;\n            this.freq = freq;\n\n            callback(userCallback);\n        });\n    }\n\n    init(callback) {\n\n        let options = {\n            audio: {\n                optional: [\n                    {\n                        echoCancellation: false\n                    }\n                ]\n            }\n        };\n\n        try {\n            navigator.mediaDevices.getUserMedia(options)\n                .then((stream) => this.handleMic(stream, this.readMic.bind(this), callback))\n                .catch(() => console.log('Error!'));\n        } catch (e) {\n            alert('Нажаль Ваш браузер не підтримує роботу з динаміком та мікрофонами.');\n            this.stop();\n            throw e;\n        }\n    }\n\n    setFrequency(frequency) {\n        if (frequency >= 18000 && frequency <= 20000) {\n            this.freq = frequency;\n            this.oscillator.frequency.value = frequency;\n        }\n    }\n\n    getFrequency() {\n        return this.freq;\n    }\n\n    stop() {\n        this.stream.getAudioTracks()[0].stop();\n        this.stream.removeTrack(this.stream.getAudioTracks()[0]);\n        this.mic.disconnect();\n        this.oscillator.disconnect();\n        cancelAnimationFrame(this.readMicInterval);\n    }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/defmove.js\n **/","module.exports = global[\"defmove\"] = require(\"-!/Users/likedeamon/homestead56/www/DefMove/node_modules/babel-loader/index.js?{\\\"presets\\\":[\\\"es2015\\\",\\\"stage-0\\\"]}!/Users/likedeamon/homestead56/www/DefMove/src/js/defmove.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/defmove.js\n ** module id = 2\n ** module chunks = 0\n **/"],"sourceRoot":""}